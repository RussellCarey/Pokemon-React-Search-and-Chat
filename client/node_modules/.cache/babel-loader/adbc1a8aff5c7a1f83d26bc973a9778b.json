{"ast":null,"code":"import _regeneratorRuntime from\"/Users/r/Desktop/React/MY PROJECTS/pokesimple/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/r/Desktop/React/MY PROJECTS/pokesimple/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/r/Desktop/React/MY PROJECTS/pokesimple/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{NEW_POKEMON,SET_COLOR}from\"../types\";import React,{useReducer}from\"react\";import PokemonContext from\"./PokemonContext\";import PokemonReducer from\"./PokemonReducer\";import{Capitalise}from\"../../utils/Capitalise\";import ColorThief from\"../../../node_modules/colorthief/dist/color-thief.mjs\";import{jsx as _jsx}from\"react/jsx-runtime\";var PokemonState=function PokemonState(props){var initialState={pokemon:null,color:null,colorLoading:true,pokemonStats:null,loading:true};//? Array is the state and dispatch (current state and action(what we call to edit the state))\n//? ContactReducer ... Is the switch statement that takes in a COMMAND FROM the array second arguement.\nvar _useReducer=useReducer(PokemonReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var getPokemon=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(number){var data,json,pokemon;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://pokeapi.co/api/v2/pokemon/\".concat(number));case 2:data=_context.sent;_context.next=5;return data.json();case 5:json=_context.sent;pokemon={id:json.id,name:Capitalise(json.name),sprite:json.sprites.other.dream_world.front_default||json.sprites.other[\"official-artwork\"].front_default,types:json.types,hp:json.stats[0].base_stat,attack:json.stats[1].base_stat,defence:json.stats[2].base_stat,special_attack:json.stats[3].base_stat,special_defence:json.stats[4].base_stat,speed:json.stats[5].base_stat,color:\"\"};dispatch({type:NEW_POKEMON,payload:pokemon});case 8:case\"end\":return _context.stop();}}},_callee);}));return function getPokemon(_x){return _ref.apply(this,arguments);};}();function getNewColor(){return _getNewColor.apply(this,arguments);}//! Returns the provider with its value - then props.children is just anything else added in betweem.\nfunction _getNewColor(){_getNewColor=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var colorThief,img,color;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:colorThief=new ColorThief();img=document.getElementById(\"pokemonimg\");img.crossOrigin=\"Anonymous\";_context2.prev=3;if(!img){_context2.next=10;break;}_context2.next=7;return colorThief.getColor(img,10);case 7:color=_context2.sent;if(color[0]<60&&color[1]<60){color[0]=240;color[1]=232-15;color[2]=186-70;}dispatch({type:SET_COLOR,payload:color});case 10:_context2.next=14;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](3);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[3,12]]);}));return _getNewColor.apply(this,arguments);}return/*#__PURE__*/_jsx(PokemonContext.Provider,{value:{pokemon:state.pokemon,loading:state.loading,color:state.color,getNewColor:getNewColor,getPokemon:getPokemon},children:props.children});};export default PokemonState;","map":{"version":3,"sources":["/Users/r/Desktop/React/MY PROJECTS/pokesimple/src/context/pokemon/PokemonState.js"],"names":["NEW_POKEMON","SET_COLOR","React","useReducer","PokemonContext","PokemonReducer","Capitalise","ColorThief","PokemonState","props","initialState","pokemon","color","colorLoading","pokemonStats","loading","state","dispatch","getPokemon","number","fetch","data","json","id","name","sprite","sprites","other","dream_world","front_default","types","hp","stats","base_stat","attack","defence","special_attack","special_defence","speed","type","payload","getNewColor","colorThief","img","document","getElementById","crossOrigin","getColor","children"],"mappings":"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","sourcesContent":["import { NEW_POKEMON, SET_COLOR } from \"../types\";\n\nimport React, { useReducer } from \"react\";\nimport PokemonContext from \"./PokemonContext\";\nimport PokemonReducer from \"./PokemonReducer\";\n\nimport { Capitalise } from \"../../utils/Capitalise\";\nimport ColorThief from \"../../../node_modules/colorthief/dist/color-thief.mjs\";\n\nconst PokemonState = (props) => {\n  const initialState = {\n    pokemon: null,\n    color: null,\n    colorLoading: true,\n    pokemonStats: null,\n    loading: true,\n  };\n\n  //? Array is the state and dispatch (current state and action(what we call to edit the state))\n  //? ContactReducer ... Is the switch statement that takes in a COMMAND FROM the array second arguement.\n  const [state, dispatch] = useReducer(PokemonReducer, initialState);\n\n  const getPokemon = async (number) => {\n    const data = await fetch(`https://pokeapi.co/api/v2/pokemon/${number}`);\n    const json = await data.json();\n\n    const pokemon = {\n      id: json.id,\n      name: Capitalise(json.name),\n      sprite:\n        json.sprites.other.dream_world.front_default ||\n        json.sprites.other[\"official-artwork\"].front_default,\n      types: json.types,\n      hp: json.stats[0].base_stat,\n      attack: json.stats[1].base_stat,\n      defence: json.stats[2].base_stat,\n      special_attack: json.stats[3].base_stat,\n      special_defence: json.stats[4].base_stat,\n      speed: json.stats[5].base_stat,\n      color: \"\",\n    };\n\n    dispatch({ type: NEW_POKEMON, payload: pokemon });\n  };\n\n  async function getNewColor() {\n    const colorThief = new ColorThief();\n    const img = document.getElementById(\"pokemonimg\");\n    img.crossOrigin = \"Anonymous\";\n\n    try {\n      if (img) {\n        const color = await colorThief.getColor(img, 10);\n        if (color[0] < 60 && color[1] < 60) {\n          color[0] = 240;\n          color[1] = 232 - 15;\n          color[2] = 186 - 70;\n        }\n\n        dispatch({ type: SET_COLOR, payload: color });\n      }\n    } catch (error) {}\n  }\n\n  //! Returns the provider with its value - then props.children is just anything else added in betweem.\n  return (\n    <PokemonContext.Provider\n      value={{\n        pokemon: state.pokemon,\n        loading: state.loading,\n        color: state.color,\n        getNewColor,\n        getPokemon,\n      }}\n    >\n      {props.children}\n    </PokemonContext.Provider>\n  );\n};\n\nexport default PokemonState;\n"]},"metadata":{},"sourceType":"module"}